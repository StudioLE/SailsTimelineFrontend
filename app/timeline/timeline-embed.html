
<div id="timeline-embed"></div>
<script>
timeline_id = window.location.href.split('/').pop()
$(document).ready(function() {
	// Get storyjs-embed.js which will then call getTimelineJSON()
	// This ensures createStoryJS isn't called early
	getStoryEmbedScript()
	function getStoryEmbedScript() {
		$.getScript('//cdnjs.cloudflare.com/ajax/libs/timelinejs/2.35.5/js/storyjs-embed.js')
			.fail(function(jqxhr, textStatus, error) {
				var err = textStatus + ", " + error
				console.log('Request Failed: ' + err)
				$('#timeline-embed').html(err)
			}).done(function(script, textStatus) {
				getTimelineJSON()
		});
	}
	function getTimelineJSON() {
		$.getJSON('http://localhost:7425/api/timeline/' + timeline_id)
			.fail(function(jqxhr, textStatus, error) {
				var err = textStatus + ", " + error
				console.log('Request Failed: ' + err)
				$('#timeline-embed').html(err)
			}).done(function(json) {
				createStoryJS({
					type: 'timeline',
					width: '100%',
					height: '600',
					source: {
						'timeline': json
					},
					// embed_id: 'timeline-embed', //OPTIONAL USE A DIFFERENT DIV ID FOR EMBED
					// start_at_end: false, //OPTIONAL START AT LATEST DATE
					// start_at_slide: '4', //OPTIONAL START AT SPECIFIC SLIDE
					// start_zoom_adjust: '3', //OPTIONAL TWEAK THE DEFAULT ZOOM LEVEL
					// hash_bookmark: true, //OPTIONAL LOCATION BAR HASHES
					// font: 'Bevan-PotanoSans', //OPTIONAL FONT
					debug: true, //OPTIONAL DEBUG TO CONSOLE
					// lang: 'fr', //OPTIONAL LANGUAGE
					// maptype: 'watercolor', //OPTIONAL MAP STYLE
					// css: 'path_to_css/timeline.css', //OPTIONAL PATH TO CSS
					// js: 'path_to_js/timeline-min.js' //OPTIONAL PATH TO JS
				})
		})
	}
	

		
})
</script>